<h2>Figma -> Source</h2>
<button id="generate">Generate</button>
<button id="cancel">Cancel</button>
<textarea name="code" id="code" cols="30" rows="10"></textarea>
<script>

document.getElementById('generate').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'generate' } }, '*')
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

const textarea = document.getElementById('code')

onmessage = msg => {
  const pluginMsg = msg.data.pluginMessage;
  if (pluginMsg.type === 'code') {
    textarea.value = pluginMsg.code;
  }
}

</script>
